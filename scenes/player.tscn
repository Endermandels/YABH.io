[gd_scene load_steps=16 format=3 uid="uid://cyxvm11aexwew"]

[ext_resource type="Script" uid="uid://dwfbjxtgvcixu" path="res://scripts/player.gd" id="1_g2els"]
[ext_resource type="Texture2D" uid="uid://fnjlvjkavmfq" path="res://assets/images/player.png" id="2_qhqgy"]
[ext_resource type="PackedScene" uid="uid://d2ckgi3aviv03" path="res://scenes/stats.tscn" id="2_smehm"]
[ext_resource type="PackedScene" uid="uid://5itqmwag64ax" path="res://components/input_component.tscn" id="3_dqkch"]
[ext_resource type="PackedScene" uid="uid://dxa78ih8w5531" path="res://components/movement_component.tscn" id="4_qlg0r"]
[ext_resource type="PackedScene" path="res://components/animation_component.tscn" id="5_qlg0r"]
[ext_resource type="PackedScene" uid="uid://cbxju2ctkpihi" path="res://scenes/gun_handler.tscn" id="6_fjrip"]
[ext_resource type="PackedScene" uid="uid://brlwixqt81c3d" path="res://components/hurtbox.tscn" id="6_tuyoq"]
[ext_resource type="AudioStream" uid="uid://em1e871gwlgk" path="res://assets/sfx/hitHurt.wav" id="9_ur7pv"]
[ext_resource type="AudioStream" uid="uid://km1wxalk6gjl" path="res://assets/sfx/powerUp.wav" id="10_d2wvv"]
[ext_resource type="Script" uid="uid://bd36sp031culg" path="res://scripts/hud.gd" id="10_y4r1p"]
[ext_resource type="AudioStream" uid="uid://c4p3v0e60u6bb" path="res://assets/sfx/explosion.wav" id="11_3v2ag"]
[ext_resource type="AudioStream" uid="uid://cw1ovnrtea77g" path="res://assets/sfx/powerUp(1).wav" id="12_jej6c"]

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_dqkch"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("Sprite2D:frame")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("GunHandler:can_shoot")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath("GunHandler:shoot_vector")
properties/3/spawn = true
properties/3/replication_mode = 1
properties/4/path = NodePath("Stats:hp")
properties/4/spawn = true
properties/4/replication_mode = 1
properties/5/path = NodePath("Stats:kills")
properties/5/spawn = true
properties/5/replication_mode = 1
properties/6/path = NodePath("Stats:last_hit_by")
properties/6/spawn = true
properties/6/replication_mode = 1
properties/7/path = NodePath("Stats:took_dmg")
properties/7/spawn = true
properties/7/replication_mode = 1

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_fjrip"]
radius = 4.0
height = 14.0

[node name="Player" type="CharacterBody2D" node_paths=PackedStringArray("input_cmp", "movement_cmp", "animation_cmp", "gun_handler", "stats")]
scale = Vector2(2, 2)
collision_layer = 0
collision_mask = 0
motion_mode = 1
script = ExtResource("1_g2els")
input_cmp = NodePath("InputComponent")
movement_cmp = NodePath("MovementComponent")
animation_cmp = NodePath("AnimationComponent")
gun_handler = NodePath("GunHandler")
stats = NodePath("Stats")

[node name="Stats" parent="." node_paths=PackedStringArray("hurt_sfx", "hit_sfx", "kill_sfx", "death_sfx") instance=ExtResource("2_smehm")]
hurt_sfx = NodePath("../HurtSFX")
hit_sfx = NodePath("../HitSFX")
kill_sfx = NodePath("../KillSFX")
death_sfx = NodePath("../DeathSFX")

[node name="Sprite2D" type="Sprite2D" parent="."]
texture = ExtResource("2_qhqgy")
hframes = 6
frame = 1

[node name="InputComponent" parent="." node_paths=PackedStringArray("body") instance=ExtResource("3_dqkch")]
body = NodePath("..")

[node name="MovementComponent" parent="." instance=ExtResource("4_qlg0r")]

[node name="AnimationComponent" parent="." node_paths=PackedStringArray("sprite") instance=ExtResource("5_qlg0r")]
sprite = NodePath("../Sprite2D")

[node name="GunHandler" parent="." node_paths=PackedStringArray("input_cmp", "stats", "cooldown_timer") instance=ExtResource("6_fjrip")]
input_cmp = NodePath("../InputComponent")
stats = NodePath("../Stats")
cooldown_timer = NodePath("CooldownTimer")

[node name="CooldownTimer" type="Timer" parent="GunHandler"]
wait_time = 0.3
one_shot = true

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_dqkch")

[node name="Hurtbox" parent="." node_paths=PackedStringArray("player", "stats") instance=ExtResource("6_tuyoq")]
player = NodePath("..")
stats = NodePath("../Stats")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Hurtbox"]
shape = SubResource("CapsuleShape2D_fjrip")

[node name="HurtSFX" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("9_ur7pv")

[node name="KillSFX" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("10_d2wvv")

[node name="DeathSFX" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("11_3v2ag")

[node name="HitSFX" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("12_jej6c")

[node name="HUD" type="CanvasLayer" parent="." node_paths=PackedStringArray("stats", "kills_label")]
script = ExtResource("10_y4r1p")
stats = NodePath("../Stats")
kills_label = NodePath("KillsLabel")

[node name="KillsLabel" type="Label" parent="HUD"]
offset_left = 8.0
offset_top = 8.0
offset_right = 66.0
offset_bottom = 31.0
text = "kills: 0"
